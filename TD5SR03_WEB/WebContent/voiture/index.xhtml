<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">

<h:head>
	<title><h:outputText value="Lecture WebService" /></title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<h:outputStylesheet library="default" name="bootstrap/bootstrap.min.css"  />
	<h:outputStylesheet library="default" name="bootstrap/jquery.mmenu.all.css"  />
	<h:outputStylesheet library="default" name="bootstrap/fonts.css"  />
	<h:outputStylesheet library="default" name="bootstrap/mystyle.css"  />
	<h:outputStylesheet library="default" name="css/moncss.css"  />
	<h:outputScript library="default" name="JS/jquery-2.2.0.min.js"  />
	<h:outputScript library="default" name="JS/jquery.mmenu.min.all.js"  />
	<h:outputScript library="default" name="JS/ent.js"  />
	<h:outputScript library="default" name="JS/bootstrap.min.js"  />
</h:head>



<body id="page">

	<header id="MainBar">
		<div id="LightGreyNav">
			<div class="container clearfix editeurBar">
				<h:outputText value="Projet SR03" escape="false" />
			</div>
		</div>
	</header>

	<main id="PageContenu" class="container" style="margin-top: 55px">

		<div class="col-sm-12 LeContenu">
			<h3>Configurateur d'achat de voiture</h3>
			
			<h:form id="data">
				<br/>
				<div id="conteneur1">
					<div class="col-md-4 text-left lead">Choix du modèle: </div>
					<div class="element1 col-md-4">
						<h:selectOneMenu class="form-control" value="#{configurateurBean.modele.nom}">
							<f:selectItem itemValue="#{null}" itemLabel="--Select--" itemDisabled="true" />
						    <f:selectItems value="#{configurateurBean.modeles}" var="mode" itemValue="#{mode.nom}" itemLabel="#{mode.nom}" />
						<f:ajax event="valueChange" listener ="#{configurateurBean.updateModele}" render="t1 t2 t3 t4 t5 t6 s1 s2 s3 s4 s5 prixTot" ></f:ajax>
						</h:selectOneMenu>
					</div>
					<div class="element2">
						<h:panelGroup id="t1">			
							<table id= "table1" class="table table-striped gpaTitle chargecenter">
								<tr>
									<th>Nom</th>
									<th>Marque</th>
									<th>Prix</th>
								</tr>				
								
								<tr>
									<td><h:outputText value="#{configurateurBean.modele.nom}"/></td>
									<td><h:outputText value="#{configurateurBean.modele.marque}"/></td>
									<td><h:outputText value="#{configurateurBean.modele.prix}"/></td>
								</tr>	
							</table>
						</h:panelGroup>
					</div>
				</div>
				
				<br/>
				<div id="conteneur2">
					<div class="col-md-4 text-left lead">Choix du type de finition: </div>
					<div class="element1 col-md-4">
						<h:selectOneMenu id="s1" class="form-control" value="#{configurateurBean.finition.type}" disabled="#{configurateurBean.modeleNotSelected}">
							<f:selectItem itemValue="#{null}" itemLabel="--Select--" itemDisabled="true" />
						    <f:selectItems value="#{configurateurBean.finitions}" var="fini" itemValue="#{fini.type}" itemLabel="#{fini.type}" />
						<f:ajax event="valueChange" listener ="#{configurateurBean.updateTypeFinition}" render="t2 t3 t4 t5 t6 s2 s3 s4 s5 prixTot" ></f:ajax>
						</h:selectOneMenu>
					</div>	
					<div class="element2">
						<h:panelGroup id="t2">			
							<table id= "table2" class="table table-striped gpaTitle chargecenter">
								<tr>
									<th>Type</th>
									<th>Prix</th>
								</tr>				
								
								<tr>
									<td><h:outputText value="#{configurateurBean.finition.type}"/></td>
									<td><h:outputText value="#{configurateurBean.finition.prix}"/></td>
								</tr>	
							</table>
						</h:panelGroup>	
					</div>
				</div>
				
				<br/>
				<div id="conteneur3">
					<div class="col-md-4 text-left lead">Choix du moteur: </div>
					<div class="element1 col-md-4">
						<h:selectOneMenu id="s2" class="form-control" value="#{configurateurBean.motorisation.nomMoteur}" disabled="#{configurateurBean.finitionNotSelected}">
						    <f:selectItem itemValue="#{null}" itemLabel="--Select--" itemDisabled="true" />
						    <f:selectItems value="#{configurateurBean.motorisations}" var="moto" itemValue="#{moto.nomMoteur}" itemLabel="#{moto.nomMoteur}" />
						<f:ajax event="valueChange" listener ="#{configurateurBean.updateMotorisation}" render="t3 prixTot" ></f:ajax>
						</h:selectOneMenu>
					</div>
					
					<div class="element2">	
						<h:panelGroup id="t3">			
							<table id= "table3" class="table table-striped gpaTitle chargecenter">
								<tr>
									<th>Nom</th>
									<th>Puissance</th>
									<th>Prix</th>
								</tr>				
								
								<tr>
									<td><h:outputText value="#{configurateurBean.motorisation.nomMoteur}"/></td>
									<td><h:outputText value="#{configurateurBean.motorisation.puissance}"/></td>
									<td><h:outputText value="#{configurateurBean.motorisation.prix}"/></td>
								</tr>	
							</table>
						</h:panelGroup>
					</div>
				</div>
				
				<br/>
				<div id="conteneur4">
					<div class="col-md-4 text-left lead">Choix des jantes: </div>
					<div class="element1 col-md-4">
						<h:selectOneMenu id="s3" class="form-control" value="#{configurateurBean.jante.nom}" disabled="#{configurateurBean.finitionNotSelected}">
						    <f:selectItem itemValue="#{null}" itemLabel="--Select--" itemDisabled="true" />
						    <f:selectItems value="#{configurateurBean.jantes}" var="jan" itemValue="#{jan.nom}" itemLabel="#{jan.nom}" />
						<f:ajax event="valueChange" listener ="#{configurateurBean.updateTypeJante}" render="t4 prixTot" ></f:ajax>
						</h:selectOneMenu>
					</div>
							
					<div class="element2">			
						<h:panelGroup id="t4">		
							<table id= "table4" class="table table-striped gpaTitle chargecenter">
								<tr>
									<th>Nom</th>
									<th>Matiere</th>
									<th>Diametre</th>
									<th>Prix</th>
								</tr>				
								
								<tr>
									<td><h:outputText value="#{configurateurBean.jante.nom}"/></td>
									<td><h:outputText value="#{configurateurBean.jante.matiere}"/></td>
									<td><h:outputText value="#{configurateurBean.jante.diametre}"/></td>
									<td><h:outputText value="#{configurateurBean.jante.prix}"/></td>
								</tr>	
							</table>
						</h:panelGroup>
					</div>
				</div>
				
				<br/>
				<div id="conteneur5">
					<div class="col-md-4 text-left lead">Choix de la couleur: </div>
					<div class="element1 col-md-4">
						<h:selectOneMenu id="s4" class="form-control" value="#{configurateurBean.couleur.couleur}" disabled="#{configurateurBean.finitionNotSelected}">
						    <f:selectItem itemValue="#{null}" itemLabel="--Select--" itemDisabled="true" />
						    <f:selectItems value="#{configurateurBean.couleurs}" var="coul" itemValue="#{coul.couleur}" itemLabel="#{coul.couleur}" />
						<f:ajax event="valueChange" listener ="#{configurateurBean.updateCouleur}" render="t5 prixTot" ></f:ajax>
						</h:selectOneMenu>
					</div>
							
					<div class="element2">	
						<h:panelGroup id="t5">		
							<table id= "table5" class="table table-striped gpaTitle chargecenter">
								<tr>
									<th>Couleur</th>
									<th>Prix</th>
								</tr>				
								
								<tr>
									<td><h:outputText value="#{configurateurBean.couleur.couleur}"/></td>
									<td><h:outputText value="#{configurateurBean.couleur.prix}"/></td>
								</tr>	
							</table>
						</h:panelGroup>
					</div>
				</div>
				
				<div id="conteneur6">
					<div class="text-left lead">Choix des options: </div>
					<div class="element1">
						<h:selectManyCheckbox id="s5" layout="pageDirection" value = "#{configurateurBean.currentOpts}" disabled="#{configurateurBean.finitionNotSelected}"> 
						   <f:selectItems value="#{configurateurBean.options}" var="opt" itemValue="#{opt.nom}" itemLabel="#{opt.nom}" />
						<f:ajax event="click" listener ="#{configurateurBean.updateCurrentOptionSups}" render="t6 prixTot" ></f:ajax>
						</h:selectManyCheckbox>
					</div>
						
					<div class="element2">
						<h:panelGroup id="t6">
							<table id= "table6" class="table table-striped gpaTitle chargecenter">
								<tr>
									<th>Nom</th>
									<th>Description</th>
									<th>Prix</th>
								</tr>				
								
								<ui:repeat value="#{configurateurBean.currentOptionsSelected}" var="opti">
									<tr>
										<td><h:outputText value="#{opti.nom}"/></td>
										<td><h:outputText value="#{opti.description}"/></td>
										<td><h:outputText value="#{opti.prix}"/></td>
									</tr>	
								</ui:repeat>
			
							</table>
						</h:panelGroup>
					</div>
				</div>
				
				<h:panelGroup layout="block" id="prixTot">
					<div class="prix">
						<h:outputText value="Prix total de la voiture #{configurateurBean.prixTotal} €" />
					</div>
				</h:panelGroup>
				
				<h:commandButton value = "Valider" onclick = "#{configurateurBean.insertVoiture}" /> 
				
								
			</h:form>
		</div>			
	</main>


</body>
</html>
